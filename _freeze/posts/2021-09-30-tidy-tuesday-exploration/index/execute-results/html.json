{
  "hash": "b22ae470d01ac90d7af332fa30094eb0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Analysis of economic papers \nsubtitle: A TidyTuesday exercise\ndescription: An exploration of some papers catalogued in NBER\nauthor: Andreas Handel\ndate: '2021-09-30'\naliases: \n  - ../tidytuesday-analysis-2021/\ncategories: \n- R\n- Data Analysis\n- Tidy Tuesday\nimage: featured.png\n---\n\n\n\n\nThis analysis was performed as part of an exercise for my [Modern Applied Data Analysis course](https://andreashandel.github.io/MADAcourse/) taught in fall 2021. \n\nOne of the weekly assignments for the students is to participate in [Tidy Tuesday](https://github.com/rfordatascience/tidytuesday). I did the exercise as well, this is my product. You can get the R Markdown/Quarto file to re-run the analysis [here](index.qmd).\n\n\n# Introduction\n\nIf you are not familiar with Tidy Tuesday, you can take a quick look [at the TidyTuesday section on this page](https://andreashandel.github.io/MADAcourse/Data_Analysis_Motivation.html).\n\nThis week's data was about an analysis of economic working papers catalogued by NBER. More on the data [is here](https://github.com/rfordatascience/tidytuesday/tree/master/data/2021/2021-09-28).\n\n# Loading packages\n\nMake sure they are installed.\nNote: I don't like loading meta-packages, such as the tidyverse. Doing so makes it really hard to figure our which packages are actually used. So I prefer to only load what I need.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary('ggplot2')\nlibrary('readr')\nlibrary('dplyr')\nlibrary('stringr')\nlibrary('tidytuesdayR')\n```\n:::\n\n\n# Data loading\n\nApparently there is now a `tidytuesdayR` package that makes data loading very easy!\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#tuesdata <- tidytuesdayR::tt_load('2021-09-28')\n```\n:::\n\n\nWell, that command above failed, claiming that date didn't exist.\nSo loading the data manually after all.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npapers <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-09-28/papers.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 29434 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): paper, title\ndbl (2): year, month\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nauthors <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-09-28/authors.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 15437 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): author, name, user_nber, user_repec\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nprograms <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-09-28/programs.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 21 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): program, program_desc, program_category\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\npaper_authors <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-09-28/paper_authors.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 67090 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): paper, author\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\npaper_programs <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-09-28/paper_programs.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 53996 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): paper, program\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n# Understanding the data\n\nThe explanations on the Tidy Tuesday website were a bit confusing. Looks like each CSV file only has a few variables, and `papers.csv` does not contain all the variables listed in the readme.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(papers)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"paper\" \"year\"  \"month\" \"title\"\n```\n\n\n:::\n\n```{.r .cell-code}\ncolnames(authors)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"author\"     \"name\"       \"user_nber\"  \"user_repec\"\n```\n\n\n:::\n\n```{.r .cell-code}\ncolnames(programs)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"program\"          \"program_desc\"     \"program_category\"\n```\n\n\n:::\n\n```{.r .cell-code}\ncolnames(paper_authors)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"paper\"  \"author\"\n```\n\n\n:::\n\n```{.r .cell-code}\ncolnames(paper_programs)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"paper\"   \"program\"\n```\n\n\n:::\n:::\n\n\nPapers seem to be linked to authors by the `paper_authors` file and to programs (areas of work) by the paper_programs file. Probably best to combine all into one data frame. The Tidy Tuesday website has some code for that already, let's see if it works\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- left_join(papers, paper_authors) %>% \n  left_join(authors) %>% \n  left_join(paper_programs) %>% \n  left_join(programs)%>% \n  mutate(\n    catalogue_group = str_sub(paper, 1, 1),\n    catalogue_group = case_when(\n      catalogue_group == \"h\" ~ \"Historical\",\n      catalogue_group == \"t\" ~ \"Technical\",\n      catalogue_group == \"w\" ~ \"General\"\n    ),\n    .after = paper\n  ) \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nJoining with `by = join_by(paper)`\nJoining with `by = join_by(author)`\nJoining with `by = join_by(paper)`\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in left_join(., paper_programs): Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 111 of `x` matches multiple rows in `y`.\nℹ Row 2 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nJoining with `by = join_by(program)`\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 130,081\nColumns: 12\n$ paper            <chr> \"w0001\", \"w0002\", \"w0003\", \"w0004\", \"w0005\", \"w0006\",…\n$ catalogue_group  <chr> \"General\", \"General\", \"General\", \"General\", \"General\"…\n$ year             <dbl> 1973, 1973, 1973, 1973, 1973, 1973, 1973, 1973, 1973,…\n$ month            <dbl> 6, 6, 6, 7, 7, 7, 8, 9, 9, 9, 9, 9, 10, 10, 10, 10, 1…\n$ title            <chr> \"Education, Information, and Efficiency\", \"Hospital U…\n$ author           <chr> \"w0001.1\", \"w0002.1\", \"w0003.1\", \"w0004.1\", \"w0005.1\"…\n$ name             <chr> \"Finis Welch\", \"Barry R Chiswick\", \"Swarnjit S Arora\"…\n$ user_nber        <chr> \"finis_welch\", \"barry_chiswick\", \"swarnjit_arora\", NA…\n$ user_repec       <chr> NA, \"pch425\", NA, \"pli669\", \"psm28\", NA, NA, NA, \"pli…\n$ program          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ program_desc     <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ program_category <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n```\n\n\n:::\n:::\n\n\nThat seems to have worked, now all data is in one data frame.\n\n\n# Exploration 1\n\nMy first idea is very idiosyncratic. A friend of mine is an [Econ/Finance professor at Bocconi University](https://faculty.unibocconi.eu/hanneswagner/). I'm going to see if he has any papers in that dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsmalldf <- df %>% filter(grepl(\"Wagner\",name))\nprint(unique(smalldf$name))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Joachim Wagner\"       \"Alexander F Wagner\"   \"Todd H Wagner\"       \n [4] \"Stefan Wagner\"        \"Mathis Wagner\"        \"Ulrich J Wagner\"     \n [7] \"Wolf Wagner\"          \"Gernot Wagner\"        \"Zachary Wagner\"      \n[10] \"Katherine R H Wagner\" \"Myles Wagner\"         \"Kathryn L Wagner\"    \n```\n\n\n:::\n:::\n\n\nNot seeing him in there. Just to make sure, a check on first name.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsmalldf <- df %>% filter(grepl(\"Hannes\",name))\nprint(unique(smalldf$name))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Hannes Schwandt\"\n```\n\n\n:::\n:::\n\n\nOk, nothing. Might be that his area, finance, is not indexed by NBER. I don't know enough about the econ/business/finance fields enough to know what is and isn't part of NBER. So I guess moving on.\n\n\n# Exploration 2\n\nIn most areas of science and when looking at publication records, one finds that most people publish very little (e.g. a student who is a co-author on a paper, then goes into the \"real world\" and never publishes again) and a few people publish a lot (super-star and/or old faculty). One usually sees an [80/20 pattern](https://en.wikipedia.org/wiki/Pareto_principle) or a distribution that follows a power law. Let's see what we find here.\n\nFirst, I'm doing a few more checks. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#looking at missing data for each variable\nnas <- colSums(is.na(df))\nprint(nas)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           paper  catalogue_group             year            month \n               0                0                0                0 \n           title           author             name        user_nber \n               0                0                0             2112 \n      user_repec          program     program_desc program_category \n           47158              530              530             1516 \n```\n\n\n:::\n:::\n\n\nMissing data pattern seems ok. To be expected that some users don't have those NBER or REPEC IDs. \n\nLet's look at number of unique papers and unique authors.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_authors = length(unique(df$author))\nn_papers = length(unique(df$title))\nprint(n_authors)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 15437\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(n_papers)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 29419\n```\n\n\n:::\n:::\n\n\nComparing those numbers to the original data frames, we see that the number of authors is same as in original `authors` data frame, that's good. Number of papers (or at least unique titles) is less. Seems like some papers have the same titles? Non-unique titles is confirmed by checking the ID for each paper, which is the same as the one in the original `papers` CSV file.\n\nLet's look at those titles that show up more than once.\nNote that we need to do that with the original `papers` data frame, since the merged one contains many duplicates since each author gets their own row.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#using base R here, can of course also do that with tidyverse syntax\ndfdup <- papers[duplicated(papers$title),]\nprint(dfdup$title)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"The Wealth of Cohorts: Retirement Saving and the Changing Assets of Older Americans\"        \n [2] \"Empirical Patterns of Firm Growth and R&D Investment: A Quality Ladder Model Interpretation\"\n [3] \"The Market for Catastrophe Risk: A Clinical Examination\"                                    \n [4] \"Taxation and Corporate Financial Policy\"                                                    \n [5] \"Asset Pricing with Heterogeneous Consumers and Limited Participation: Empirical Evidence\"   \n [6] \"Tax Incidence\"                                                                              \n [7] \"Liquidity Shortages and Banking Crises\"                                                     \n [8] \"Legal Institutions and Financial Development\"                                               \n [9] \"Inequality\"                                                                                 \n[10] \"Predictive Systems: Living with Imperfect Predictors\"                                       \n[11] \"Corruption\"                                                                                 \n[12] \"The Dynamic Properties of Financial-Market Equilibrium with Trading Fees\"                   \n[13] \"Forward Guidance\"                                                                           \n[14] \"Labor Market Integration Before the Civil War\"                                              \n[15] \"The Impact of Globalization on Pre-Industrial, Technologically Quiescent Economies\"         \n```\n\n\n:::\n:::\n\n\nSome titles I can easily seen being used more than once, e.g. a paper called \"Corruption\". Others sound very unique, so not sure why they show up as duplicates. If this were a serious analysis, I would look more closely into that. But for this exercise, and since it's just a few titles, I'll ignore and move on.\n\nI want to look at publications per author. Since names might not be unique but NBER ID should be, I'm just going to remove those authors that don't have an NBER ID (likely most of them have co-authored very few papers) and focus on the remaining authors. For each, I'll count their total papers by counting how often they show up.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndfnew <- df %>% filter(!is.na(user_nber)) %>% \n                group_by(user_nber) %>% \n                summarise(n_papers = n() ) %>%\n                arrange(desc(n_papers)) %>%\n                mutate(allpapers = cumsum(n_papers)) \ndfnew$id = 1:nrow(dfnew) #add an ID variable for plotting\n```\n:::\n\n\nLooking at the histogram of number of papers for each author.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- dfnew %>% ggplot(aes(n_papers)) + geom_histogram() \nplot(p1)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\nLooks like expected, most authors have published only a few papers, a few have a lot.\n\nAnother way to look at this is with a violin plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1a <- dfnew %>% ggplot(aes(x=1, y=n_papers)) + geom_violin() \nplot(p1a)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nThat's a very flat violin plot, with almost all the density close to 1.\n\nDoing a quick numerical summary\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(dfnew$n_papers)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   2.000   3.000   8.983   7.000 359.000 \n```\n\n\n:::\n:::\n\n\nOf course one needs to have at least 1 paper published to be in there, so that's the minimum. The median is 3, so half of individuals have published 3 or less. The mean is higher, as expected for skewed data, and the max is at 359 papers, confirming the histogram which shows a few individuals wrote a lot of papers.\n\n\nJust because, let's look at the 10 most published authors\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(dfnew,n=10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 4\n   user_nber        n_papers allpapers    id\n   <chr>               <int>     <int> <int>\n 1 jonathan_gruber       359       359     1\n 2 james_heckman         331       690     2\n 3 daron_acemoglu        308       998     3\n 4 janet_currie          306      1304     4\n 5 michael_bordo         297      1601     5\n 6 edward_glaeser        291      1892     6\n 7 joshua_aizenman       284      2176     7\n 8 martin_feldstein      272      2448     8\n 9 andrei_shleifer       242      2690     9\n10 alan_taylor           239      2929    10\n```\n\n\n:::\n:::\n\n\nSince this is not my field, I don't know any of those individuals. But looks like the 1st one, Gruber, [is somewhat famous](https://en.wikipedia.org/wiki/Jonathan_Gruber_(economist)) and also worked at NBER, so maybe not surprising that his papers are in there. Not sure, I don't know how exactly NBER works, but it's a quick consistency check and no red flag.\n\nThis looks at the accumulation of papers for the first N authors, with number of authors on the x-axis and total papers on the y axis. If every author were to contribute the same number of papers, we'd see a straight line up the diagonal. The fact that some authors write more papers, and most just a few, pushes the curve to the upper left corner. I'm also plotting a few lines that show the 80/20 idea, i.e. the vertical line indicates 20% of authors, the horizontal indicates 80% of all published papers.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnobs = nrow(dfnew)\ntotpapers = max(dfnew$allpapers)\np2 <- dfnew %>% ggplot(aes(x=id, y=allpapers)) + \n                geom_point() + \n                theme(legend.position=\"none\") + \n               geom_segment(aes(x = floor(nobs*0.2), y = 1, xend = floor(nobs*0.2), yend = floor(totpapers*0.8) ), colour = \"red\", linetype=\"dashed\", size=1) +\n geom_segment(aes(x = 1, y = floor(totpapers*0.8), xend = floor(nobs*0.2), yend = floor(totpapers*0.8) ), colour = \"red\", linetype=\"dashed\", size=1) \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(p2)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nLooks like the NBER papers are fairly close to that 80/20 distribution, with few authors contributing the bulk, and most authors contributing little. \n\nNote that this does not account for co-authorship, just doing a per-author count.\n\n\n# Further explorations\n\nI'm going to leave it at this for now. In contrast to my [2019 Tidy Tuesday exploration](/posts/tidytuesday-analysis/) I won't try a fake statistical analysis here.\n\nBut I can think of a few other ideas and things to explore Here are a few: \n\n* The Tidy Tuesday website had a link to [this article](https://bldavies.com/blog/female-representation-collaboration-nber/) which looks at gender representation among the papers/authors. We could do that here too, e.g. follow their approach to try and guess gender for authors, then could stratify number of papers by gender of author. \n\n* Another possible exploration would be to look at the numbers of papers per author based on the area of research, i.e. the `programs` variable.\n\n* Yet another analysis one could do is to look at the pattern of publication for those that publish a good bit (say over 50 papers) and see how numbers of papers per year changes, or how number of co-authors changes over the years.\n\n\n# Summary\n\nPatterns of authorship have been explored often. Sometimes they lead to useful information. At other times, one just needs more or less meaningful numbers for career advancement purposes. See e.g. an analysis of my own papers I did and wrote up [in this post covering Google scholar data](/posts/publications-analysis-1/) and [this post using the `bibliometrix` package](/posts/publications-analysis-2/).\n\nMy exploration here was not too thorough, but some expected patterns showed up, namely the 80/20 skewed distribution in authorship.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}